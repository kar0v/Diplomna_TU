# MySQL Configuration
    - name: Install MySQL Packages
      yum: 
        name: "{{ item }}"
        update_cache: true
        state: latest
      loop: 
        - mariadb-server
        - MySQL-python

    - name: Start mariadb service
      service: 
        name: mariadb 
        state: started 
        enabled: true
 
    - name: SQL Password block
      block:
        - name: Set MySQL root Password
          mysql_user:
            login_user: root
            login_password: ''
            name: 'root'
            password: "{{mysql_root_password}}"
            state: present
      rescue:
        - name: Set MySQL root Password
          mysql_user:
            login_user: root
            login_password: "{{mysql_root_password}}"
            name: 'root'
            password: "{{mysql_root_password}}"
            state: present
 
    - name: Creates database for WordPress
      mysql_db:
        name: "{{ mysql_db }}"
        state: present
        login_user: root
        login_password: "{{ mysql_root_password }}"
 
    - name: Create MySQL user for WordPress
      mysql_user:
        name: "{{ mysql_user }}"
        password: "{{ mysql_password }}"
        priv: "{{ mysql_db }}.*:ALL"
        state: present
        login_user: root
        login_password: "{{ mysql_root_password }}"